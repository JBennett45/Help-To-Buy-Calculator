function toggleSelectorHtb(){var t=document.getElementById("htb_equity_amm");1==checkBox_htb_checked.checked?jQuery(t).show(300):jQuery(t).hide(300)}function thousandFormaterK(t){return Math.abs(t)>999?Math.sign(t)*(Math.abs(t)/1e3).toFixed(0)+"k":Math.sign(t)*Math.abs(t)}function numberSepWithCommas(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function noToCleanNoChars(t){return comss=t.replace(/^[, ]+|[, ]+$|[, ]+/g," ").trim(),newnumb=comss.replace(/\s/g,""),newnumb}function calculateHTBPayment(){var t=htb_term/100*prop_value,e=t.toFixed(0);return e}function calcLowerMortBracket(){var t=3.5*user_incomeChar;return t}function calcHigherMortBracket(){var t=4.5*user_incomeChar;return t}function getValues(){jQuery(".input_wrapp").removeClass("error_handle"),user_income=document.getElementById("household_income").value,user_dep=document.getElementById("user_deposit").value,htb_term=document.getElementById("htb_loan_am").value,prop_value=document.getElementById("property_value_fld").value,user_incomeChar=noToCleanNoChars(user_income),userepChar=noToCleanNoChars(user_dep),!user_income||isNaN(user_incomeChar)?jQuery(".income_input_wrap").addClass("error_handle"):!user_dep||isNaN(userepChar)?jQuery(".deposit_input_wrap").addClass("error_handle"):(subtracted_htb=calculateHTBPayment(),lowest_mort=calcLowerMortBracket(),hgihest_mort=calcHigherMortBracket(),jQuery(".prop_ammount").html(numberSepWithCommas(prop_value)),1==checkBox_htb_checked.checked?(jQuery("#helpToBuyRsults").show(),jQuery(".htb_allow_ammount").html(numberSepWithCommas(subtracted_htb)),remain_Mortgage=prop_value-subtracted_htb-noToCleanNoChars(user_dep)):(jQuery("#helpToBuyRsults").hide(),remain_Mortgage=prop_value-noToCleanNoChars(user_dep)),jQuery(".dep_ammount").html(numberSepWithCommas(userepChar)),jQuery(".mortremain_ammount").html(numberSepWithCommas(remain_Mortgage)),jQuery(".min_mort_allow").html(numberSepWithCommas(lowest_mort)),jQuery(".max_mort_allow").html(numberSepWithCommas(hgihest_mort)),remain_Mortgage<hgihest_mort?jQuery(".mortgage_outcome_result").css("color","green").html("Based on your income, you may be able to get a mortgage of this value."):jQuery(".mortgage_outcome_result").css("color","red").html("Based on your income, it may be difficult to get a mortgage of this value."),jQuery(".Htb_Results").show(300))}var user_income,user_dep,htb_term,prop_value,checkBox_htb_checked=document.getElementById("helpToBuyShow");!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";function e(){var t=document.createElement("input");return t.setAttribute("type","range"),"text"!==t.type}function i(t,e){var i=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)}function n(t,e){return e=e||100,function(){if(!t.debouncing){var i=Array.prototype.slice.apply(arguments);t.lastReturnVal=t.apply(window,i),t.debouncing=!0}return clearTimeout(t.debounceTimeout),t.debounceTimeout=setTimeout(function(){t.debouncing=!1},e),t.lastReturnVal}}function o(t){return t&&(0===t.offsetWidth||0===t.offsetHeight||t.open===!1)}function s(t){for(var e=[],i=t.parentNode;o(i);)e.push(i),i=i.parentNode;return e}function r(t,e){function i(t){"undefined"!=typeof t.open&&(t.open=!t.open)}var n=s(t),o=n.length,r=[],a=t[e];if(o){for(var h=0;h<o;h++)r[h]=n[h].style.cssText,n[h].style.setProperty?n[h].style.setProperty("display","block","important"):n[h].style.cssText+=";display: block !important",n[h].style.height="0",n[h].style.overflow="hidden",n[h].style.visibility="hidden",i(n[h]);a=t[e];for(var l=0;l<o;l++)n[l].style.cssText=r[l],i(n[l])}return a}function a(t,e){var i=parseFloat(t);return Number.isNaN(i)?e:i}function h(t){return t.charAt(0).toUpperCase()+t.substr(1)}function l(e,o){if(this.$window=t(window),this.$document=t(document),this.$element=t(e),this.options=t.extend({},m,o),this.polyfill=this.options.polyfill,this.orientation=this.$element[0].getAttribute("data-orientation")||this.options.orientation,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.DIMENSION=p.orientation[this.orientation].dimension,this.DIRECTION=p.orientation[this.orientation].direction,this.DIRECTION_STYLE=p.orientation[this.orientation].directionStyle,this.COORDINATE=p.orientation[this.orientation].coordinate,this.polyfill&&c)return!1;this.identifier="js-"+u+"-"+d++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=t('<div class="'+this.options.fillClass+'" />'),this.$handle=t('<div class="'+this.options.handleClass+'" />'),this.$range=t('<div class="'+this.options.rangeClass+" "+this.options[this.orientation+"Class"]+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=t.proxy(this.handleDown,this),this.handleMove=t.proxy(this.handleMove,this),this.handleEnd=t.proxy(this.handleEnd,this),this.init();var s=this;this.$window.on("resize."+this.identifier,n(function(){i(function(){s.update(!1,!1)},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(t,e){if(!e||e.origin!==s.identifier){var i=t.target.value,n=s.getPositionFromValue(i);s.setPosition(n)}})}Number.isNaN=Number.isNaN||function(t){return"number"==typeof t&&t!==t};var u="rangeslider",d=0,c=e(),m={polyfill:!0,orientation:"horizontal",rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",activeClass:"rangeslider--active",horizontalClass:"rangeslider--horizontal",verticalClass:"rangeslider--vertical",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]},p={orientation:{horizontal:{dimension:"width",direction:"left",directionStyle:"left",coordinate:"x"},vertical:{dimension:"height",direction:"top",directionStyle:"bottom",coordinate:"y"}}};return l.prototype.init=function(){this.update(!0,!1),this.onInit&&"function"==typeof this.onInit&&this.onInit()},l.prototype.update=function(t,e){t=t||!1,t&&(this.min=a(this.$element[0].getAttribute("min"),0),this.max=a(this.$element[0].getAttribute("max"),100),this.value=a(this.$element[0].value,Math.round(this.min+(this.max-this.min)/2)),this.step=a(this.$element[0].getAttribute("step"),1)),this.handleDimension=r(this.$handle[0],"offset"+h(this.DIMENSION)),this.rangeDimension=r(this.$range[0],"offset"+h(this.DIMENSION)),this.maxHandlePos=this.rangeDimension-this.handleDimension,this.grabPos=this.handleDimension/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position,e)},l.prototype.handleDown=function(t){if(t.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),this.$range.addClass(this.options.activeClass),!((" "+t.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var e=this.getRelativePosition(t),i=this.$range[0].getBoundingClientRect()[this.DIRECTION],n=this.getPositionFromNode(this.$handle[0])-i,o="vertical"===this.orientation?this.maxHandlePos-(e-this.grabPos):e-this.grabPos;this.setPosition(o),e>=n&&e<n+this.handleDimension&&(this.grabPos=e-n)}},l.prototype.handleMove=function(t){t.preventDefault();var e=this.getRelativePosition(t),i="vertical"===this.orientation?this.maxHandlePos-(e-this.grabPos):e-this.grabPos;this.setPosition(i)},l.prototype.handleEnd=function(t){t.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$range.removeClass(this.options.activeClass),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},l.prototype.cap=function(t,e,i){return t<e?e:t>i?i:t},l.prototype.setPosition=function(t,e){var i,n;void 0===e&&(e=!0),i=this.getValueFromPosition(this.cap(t,0,this.maxHandlePos)),n=this.getPositionFromValue(i),this.$fill[0].style[this.DIMENSION]=n+this.grabPos+"px",this.$handle[0].style[this.DIRECTION_STYLE]=n+"px",this.setValue(i),this.position=n,this.value=i,e&&this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(n,i)},l.prototype.getPositionFromNode=function(t){for(var e=0;null!==t;)e+=t.offsetLeft,t=t.offsetParent;return e},l.prototype.getRelativePosition=function(t){var e=h(this.COORDINATE),i=this.$range[0].getBoundingClientRect()[this.DIRECTION],n=0;return"undefined"!=typeof t.originalEvent["client"+e]?n=t.originalEvent["client"+e]:t.originalEvent.touches&&t.originalEvent.touches[0]&&"undefined"!=typeof t.originalEvent.touches[0]["client"+e]?n=t.originalEvent.touches[0]["client"+e]:t.currentPoint&&"undefined"!=typeof t.currentPoint[this.COORDINATE]&&(n=t.currentPoint[this.COORDINATE]),n-i},l.prototype.getPositionFromValue=function(t){var e,i;return e=(t-this.min)/(this.max-this.min),i=Number.isNaN(e)?0:e*this.maxHandlePos},l.prototype.getValueFromPosition=function(t){var e,i;return e=t/(this.maxHandlePos||1),i=this.step*Math.round(e*(this.max-this.min)/this.step)+this.min,Number(i.toFixed(this.toFixed))},l.prototype.setValue=function(t){t===this.value&&""!==this.$element[0].value||this.$element.val(t).trigger("input",{origin:this.identifier})},l.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+u),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},t.fn[u]=function(e){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t(this),o=n.data("plugin_"+u);o||n.data("plugin_"+u,o=new l(this,e)),"string"==typeof e&&o[e].apply(o,i)})},"rangeslider.js is available in jQuery context e.g $(selector).rangeslider(options);"}),window.onload=function(){document.getElementById("calc_submit").onclick=getValues},jQuery(document).ready(function(t){function e(t,e){t.textContent="£"+thousandFormaterK(e)}t("#reset_htb_form").click(function(){document.getElementById("htb_form_calc").reset(),t(".input_wrapp").removeClass("error_handle"),t(".rangeslider__handle").css("left","0px"),t(".rangeslider__handle").html("0"),t(".rangeslider__handle").val("0"),t(".Htb_Results").hide(300),t("#htb_equity_amm").hide(300)});var i=t('input[type="range"]');i.rangeslider({polyfill:!1,onInit:function(){var i=t(".rangeslider__handle",this.$range);e(i[0],this.value)}}).on("input",function(i){var n=t(".rangeslider__handle",i.target.nextSibling);e(n[0],this.value)});document.getElementById("rs-range-line"),document.getElementById("rs-bullet")});